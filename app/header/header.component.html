<div id="header" class="header navbar navbar-default" (click)="menu.toggleDropdown($event)">
  <div class="container-fluid">
    <!-- begin mobile sidebar expand / collapse button -->
    <div class="navbar-header">
      <!--<a href="http://intranet.dhs.nycnet:4444" class="navbar-brand">-->
      <a href="/" class="navbar-brand">
        <img src="assets/img/dss_logo_white_sm.png" alt="dhs_logo" width="190" height="33">
      </a>
      <button type="button" class="navbar-toggle" data-click="sidebar-toggled">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
    </div>
    <!-- end mobile sidebar expand / collapse button -->

    <!-- begin navbar-collapse -->
    <!-- begin mega menu -->
    <div class="collapse navbar-collapse pull-left" id="top-navbar">
      <div class="nav navbar-nav">
        <div [ngClass]="headerMenu.main.container" dropdown>
          <ds-menu-button [id]="headerMenu.main.menu.id"
                          [name]="headerMenu.main.menu.name"
                          className="text-white">
            <ds-icon [icon]="headerMenu.main.menu.icon"
                     fixed="true"></ds-icon>
            {{headerMenu.main.menu.label}}
            <b class="caret"></b>
          </ds-menu-button>
          <ds-menu [className]="headerMenu.main.menu.id"
                   [triggerBy]="headerMenu.main.menu.id">
            <div class="row">
              <div *ngFor="let submenu of headerMenu.main.items"
                   [ngClass]="submenu.container"
                   [ngSwitch]="submenu.type">

                <ds-menu-header [icon]="submenu.header.icon">{{submenu.header.text}}</ds-menu-header>

                <div class="row" *ngSwitchCase="'list'">
                  <ds-list nav-list>
                    <ds-list-item *ngFor="let item of submenu.items" dsCloseToggle>
                      <a [href]="item.href" class="text-ellipsis">
                        <ds-icon [icon]="item.activeIcon ? item.activeIcon : 'angle-right'"
                                 size="lg" fixed="true" class="text-inverse"></ds-icon>
                        {{item.text}}
                        <ds-badge *ngIf="item.badge" [status]="item.badge.class">{{item.badge.value}}</ds-badge>
                      </a>
                    </ds-list-item>
                  </ds-list>
                </div>
                <div *ngSwitchCase="'paragraph'">
                  <p *ngFor="let item of submenu.items">
                    {{item.text}}
                  </p>
                </div>
              </div>
            </div>
          </ds-menu>
        </div>
        <div>
          <a href="#" class="text-white ng-binding"><i class="fa fa-envelope-o"></i> Contact DSS OIT</a>
        </div>
      </div>
    </div>
    <!-- end navbar-collapse -->
    <!-- ./end mega menu -->

    <!-- begin header navigation right -->
    <div class="nav navbar-nav navbar-right">
      <!-- begin header global search -->
      <div>
        <form class="navbar-form full-width ng-pristine ng-valid">
          <div class="form-group">
            <input type="text" class="form-control" placeholder="Global Enter keyword">
            <button type="submit" class="btn btn-search">
              <ds-icon icon="search"></ds-icon>
            </button>
          </div>
        </form>
      </div>
      <!-- ./end header global search -->

      <div dropdown [ngClass]="headerMenu.notification.container">
        <ds-menu-button [id]="headerMenu.notification.menu.id" [name]="headerMenu.notification.menu.name"
                        className="text-white f-s-14">
          <ds-icon [icon]="headerMenu.notification.menu.icon"></ds-icon>
          <span class="label">4</span>
        </ds-menu-button>
        <ds-menu [className]="headerMenu.notification.menu.id + ' animated fadeInDown'"
                 class="pull-right"
                 [triggerBy]="headerMenu.notification.menu.id">
          <li class="dropdown-header">Notification ({{headerMenu.notification.items.length}})</li>
          <!--<ds-menu-item className="dropdown-header">Notification (4)</ds-menu-item>-->
          <ds-menu-item class="media"
                        [link]="item.link"
                        *ngFor="let item of headerMenu.notification.items">
            <div class="media-left">
              <ds-icon *ngIf="!item.icon.thumbnail"
                       class="media-object" icon="warning" [color]="item.icon.background"></ds-icon>
              <img *ngIf="item.icon.thumbnail"
                   [src]="item.icon.thumbnail" class="media-object" alt="">
            </div>
            <div class="media-body">
              <h6 class="media-heading">{{item.text}}</h6>
              <p *ngIf="item.description">{{item.description}}</p>
              <div class="text-muted f-s-11">{{item.timestamp}} ago</div>
            </div>
          </ds-menu-item>
          <!-- Todo: hover and focus is not same as original UI design -->
          <ds-menu-item class="dropdown-footer text-center" [link]="'javscript:'">View more</ds-menu-item>
        </ds-menu>
      </div>

      <!-- ngIf: setting.layout.pageLanguageBar === true -->
      <!-- Todo: ng-if="setting.layout.pageLanguageBar === true" -->
      <div dropdown [ngClass]="headerMenu.language.container">
        <ds-menu-button [id]="headerMenu.language.menu.id" [name]="headerMenu.language.menu.name">
          <ds-icon [ngClass]="headerMenu.language.selected.icon"
                   [title]="headerMenu.language.selected.title"></ds-icon>
          <span class="name text-white">{{headerMenu.language.selected.text}}</span>
          <b class="caret text-white"></b>
        </ds-menu-button>
        <ds-menu [className]="headerMenu.language.menu.id + ' animated fadeInRight p-b-0'"
                 [triggerBy]="headerMenu.language.menu.id">
          <!-- Todo: what does this arrow class list item do? -->
          <li class="arrow"></li>
          <!-- Todo: when app setting is ready onClick function to menu item to change language setting -->
          <ds-menu-item *ngFor="let item of headerMenu.language.items">
            <ds-icon [ngClass]="item.icon" [title]="item.title"></ds-icon>
            {{item.text}}
          </ds-menu-item>
          <li class="divider m-b-0"></li>
          <li class="text-center"><a href="javascript:"><i class="fa fa-sliders"></i> More Options</a></li>
        </ds-menu>
      </div>

      <div dropdown [ngClass]="headerMenu.user.container">
        <ds-menu-button [id]="headerMenu.user.menu.id" [name]="headerMenu.user.menu.name">
          <img [src]="(userProfile$ | async)" alt="user-rbs" width="128" height="128" *ngIf="userProfile$ | async">
          <span class="hidden-xs text-white">{{userName$ | async}}</span>
          <b class="caret text-white"></b>
        </ds-menu-button>
        <!-- Todo: make directive to handle animate features -->
        <ds-menu [className]="headerMenu.user.menu.id + ' animated fadeInLeft'"
                 [triggerBy]="headerMenu.user.menu.id">
          <!-- Todo: what does this arrow class list item do? -->
          <li class="arrow"></li>
          <ds-menu-item *ngFor="let item of headerMenu.user.items" [link]="item.link">
            <ds-icon [icon]="item.icon"></ds-icon>
            {{item.text}}
            <ds-badge *ngIf="item.badge"
                      [status]="item.badge.class"
                      class="pull-right">{{item.badge.value}}</ds-badge>
          </ds-menu-item>
          <li class="divider"></li>
          <li>
            <!-- Directive for logout -->
            <a logout-btn dsCloseToggle
               [routerLink]="['login']"
               class="ng-binding logout">
              <i class="fa fa-sign-out"></i> Log Out of CapApp
            </a>
          </li>
        </ds-menu>
      </div>

    </div>
    <!-- end header navigation right -->
  </div>
</div>
